<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>UPSC Study Discussion Club</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
:root { --accent:#6C63FF; --accent2:#00C2A8; }
body {
  background: radial-gradient(circle at 50% 20%, #1e1e3f 0%, #000 100%);
  color: white; font-family: "Poppins", sans-serif;
  margin: 0; padding: 0; text-align: center;
}
.hidden { display:none; }
.card-grid { display:grid; grid-template-columns:repeat(2,1fr); gap:16px; margin:25px; }
.card { background:rgba(255,255,255,0.08); padding:18px; border-radius:14px; cursor:pointer; transition:0.3s; backdrop-filter:blur(6px); }
.card:hover { background:rgba(255,255,255,0.18); transform:scale(1.03); }
.card img { width:70px; height:70px; margin-bottom:8px; }

button {
  cursor:pointer; border:none; font-weight:600;
  border-radius:10px; padding:12px 22px; color:white;
}
.primary { background:linear-gradient(90deg,#ff5858,#ff9e00); }
.secondary { background:linear-gradient(90deg,#007bff,#00d4ff); }

.backBtn {
  position:absolute; left:12px; top:12px;
  border:none; background:rgba(255,255,255,0.13);
  padding:8px 14px; border-radius:10px; color:white;
}
.data-card {
  background:rgba(255,255,255,0.1);
  padding:16px; border-radius:10px;
  margin:12px; text-align:left;
}
.data-card img { width:100%; border-radius:10px; margin-top:10px; }
a { color:#00d4ff; text-decoration:none; word-break:break-all; }
</style>
</head>

<body>
<!-- HOME -->
<div id="homeScreen">
  <h2>üìò UPSC Study Discussion Club</h2>
  <p>Select a section</p>
  <div class="card-grid">
    <div class="card" onclick="openSection('current')"><img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png"><div>Current Affairs</div></div>
    <div class="card" onclick="openSection('practice')"><img src="https://cdn-icons-png.flaticon.com/512/201/201572.png"><div>Practice Questions</div></div>
    <div class="card" onclick="openSection('mindmap')"><img src="https://cdn-icons-png.flaticon.com/512/952/952717.png"><div>Mind Maps</div></div>
    <div class="card" onclick="openSection('interview')"><img src="https://cdn-icons-png.flaticon.com/512/3135/3135810.png"><div>Interview Q&A</div></div>
    <div class="card" onclick="openSection('contest')"><img src="https://cdn-icons-png.flaticon.com/512/1828/1828884.png"><div>Contest</div></div>
  </div>
</div>

<!-- DATA SECTION -->
<div id="dataScreen" class="hidden">
  <button class="backBtn" onclick="goHome()">‚≠† Back</button>
  <h2 id="sectionTitle"></h2>
  <div id="dataContainer"></div>
</div>

<!-- CONTEST (same as before, shortened for focus) -->
<div id="contestScreen" class="hidden">
  <button class="backBtn" onclick="goHome()">‚≠† Back</button>
  <h2>üèÜ Contest</h2>
  <button class="primary" onclick="alert('‚úÖ Demo Payment Successful')">Pay Entry Fee ‚Çπ10</button>
</div>

<script>
const urls = {
  current: "https://raw.githubusercontent.com/avnoordeepsingh733-svg/Avnoor/main/currentaffairs.json",
  practice: "https://raw.githubusercontent.com/avnoordeepsingh733-svg/Avnoor/main/upsc%20practise%20questions.json",
  mindmap: "https://raw.githubusercontent.com/avnoordeepsingh733-svg/Avnoor/main/mindmaps.json",
  interview: "https://raw.githubusercontent.com/avnoordeepsingh733-svg/Avnoor/main/upscinterviewpractisequestions.json"
};

async function openSection(sec){
  if(sec==="contest"){
    document.getElementById("homeScreen").classList.add("hidden");
    document.getElementById("contestScreen").classList.remove("hidden");
    return;
  }

  document.getElementById("homeScreen").classList.add("hidden");
  document.getElementById("dataScreen").classList.remove("hidden");
  const titles = {
    current:"üì∞ Current Affairs",
    practice:"üß† Practice Questions",
    mindmap:"üó∫Ô∏è Mind Maps",
    interview:"üí¨ Interview Q&A"
  };
  document.getElementById("sectionTitle").innerText = titles[sec] || "Section";

  try {
    const res = await fetch(urls[sec]);
    const data = await res.json();
    renderData(data);
  } catch (err) {
    document.getElementById("dataContainer").innerHTML = `<p style="color:red;">Failed to load data</p>`;
  }
}

function renderData(data){
  const container = document.getElementById("dataContainer");
  container.innerHTML = "";
  data.forEach(item=>{
    const div = document.createElement("div");
    div.className="data-card";
    let title = item.title || item.question || item.heading || "Untitled";
    let desc = item.description || item.answer || item.details || item.content || "";
    let img = item.image || item.img || "";
    let link = item.link || item.url || "";
    div.innerHTML = `<h3>${title}</h3>
                     ${desc ? `<p>${desc}</p>` : ""}
                     ${img ? `<img src='${img}' alt='image'>` : ""}
                     ${link ? `<p><a href='${link}' target='_blank'>üîó View More</a></p>` : ""}`;
    container.appendChild(div);
  });
}

function goHome(){
  document.querySelectorAll("div").forEach(d=>d.classList.add("hidden"));
  document.getElementById("homeScreen").classList.remove("hidden");
}
</script>
</body>
</html>
