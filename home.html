<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Study Discussion Club</title>

<!-- React + Babel -->
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<style>
body {
  margin: 0;
  font-family: 'Segoe UI', Arial, sans-serif;
  background: #f8f8f8;
}
.container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  padding: 20px;
  min-height: 100vh;
}
input, button {
  padding: 10px;
  margin: 5px;
  width: 90%;
  max-width: 400px;
  border-radius: 8px;
  border: 1px solid #ccc;
}
button {
  font-weight: bold;
  color: white;
  border: none;
  cursor: pointer;
  background: #007AFF;
}
.back-button {
  position: absolute;
  top: 20px;
  left: 20px;
  cursor: pointer;
  font-size: 20px;
}
.exam-box {
  background: white;
  padding: 15px;
  width: 90%;
  max-width: 400px;
  margin: 10px 0;
  border-radius: 12px;
  box-shadow: 0 3px 10px rgba(0,0,0,0.1);
  text-align: center;
  font-size: 18px;
  font-weight: 600;
  color: #007AFF;
  transition: 0.2s;
}
.exam-box:hover {
  background: #007AFF;
  color: white;
  transform: translateY(-2px);
}
.notice-box {
  background: #f0f0f0;
  padding: 10px;
  border-radius: 8px;
  margin: 10px 0;
  font-size: 14px;
}
.image-frame {
  border-radius: 10px;
  overflow: hidden;
  margin: 10px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
  background: #fff;
  width: 90%;
}
.image-frame img {
  width: 100%;
  display: block;
}
.next-btn {
  background-color: #007AFF;
}
.next-btn:disabled {
  background-color: gray;
  cursor: not-allowed;
}
</style>
</head>
<body>
<div id="root"></div>

<!-- ‚úÖ React Code -->
<script type="text/babel">

const { useState, useEffect } = React;

function App() {
  const [screen, setScreen] = useState("welcome");
  const [signupData, setSignupData] = useState({username:"", email:"", password:"", mobile:""});
  const [quizAnswers, setQuizAnswers] = useState({});

  const sections = [
    {name:"Current Affairs", url:"https://raw.githubusercontent.com/Sajanpreetsingh367/Gill-Tarn-taran/main/current_affairs.json"},
    {name:"Practice Questions", url:"https://raw.githubusercontent.com/Sajanpreetsingh367/Gill-Tarn-taran/main/practice_questions.json"},
    {name:"Mind Maps", url:"https://raw.githubusercontent.com/Sajanpreetsingh367/Gill-Tarn-taran/main/mind_map.json"},
    {name:"Books Summary", url:"https://raw.githubusercontent.com/Sajanpreetsingh367/Gill-Tarn-taran/main/books_summary.json"},
    {name:"Interview", url:"https://raw.githubusercontent.com/Sajanpreetsingh367/Gill-Tarn-taran/main/interview_practise.json"},
    {name:"Discussion", url:"https://raw.githubusercontent.com/Sajanpreetsingh367/Gill-Tarn-taran/main/sdc_news.json"},
  ];

  // Welcome screen
  if(screen === "welcome") return (
    <div className="container">
      <h2>Welcome to Study Discussion Club</h2>
      <button onClick={() => setScreen("signup")}>Next</button>
    </div>
  );

  // Signup screen
  if(screen === "signup") return (
    <div className="container">
      <h2>Signup</h2>
      {Object.keys(signupData).map(key =>
        <input key={key} placeholder={key.toUpperCase()} type={key==="password"?"password":"text"} 
        value={signupData[key]} onChange={e=>setSignupData({...signupData,[key]:e.target.value})}/>
      )}
      <button onClick={()=>{
        if(Object.values(signupData).every(v=>v!=="")) setScreen("home");
        else alert("Fill all fields");
      }}>Signup</button>
    </div>
  );

  // ‚úÖ Home screen
  if(screen === "home") return (
    <div className="container">
      <h2>üìö Choose Your Section</h2>
      {sections.map((s,i)=>
        <div key={i} className="exam-box" onClick={()=>setScreen(`section-${i}`)}>
          {s.name}
        </div>
      )}
      <div className="exam-box" style={{background:"#fff6e6", color:"#ff7b00"}} onClick={()=>setScreen("contest")}>
        üéØ Contest
      </div>
    </div>
  );

  // Section pages
  const idx = parseInt(screen.replace("section-",""));
  if(!isNaN(idx) && sections[idx]) return <StudySection section={sections[idx]} back={()=>setScreen("home")} />;

  if(screen==="contest") return <ContestScreen back={()=>setScreen("home")} setScreen={setScreen}/>;
  if(screen==="quiz") return <QuizScreen back={()=>setScreen("contest")} answers={quizAnswers} setAnswers={setQuizAnswers}/>;

  return null;
}

// Study Section Component
function StudySection({section,back}){
  const [data,setData] = useState([]);
  const [error,setError] = useState("");

  useEffect(()=>{
    fetch(section.url)
    .then(r=>r.json())
    .then(j=>setData(j))
    .catch(e=>setError("‚ùå Failed to load data"));
  },[section.url]);

  return (
    <div className="container">
      <div className="back-button" onClick={back}>üîô</div>
      <h2>{section.name}</h2>
      {error && <div className="notice-box">{error}</div>}
      {data.map((item,i)=>
        <div key={i} className="image-frame">
          <img src={item.image || item.url || "https://via.placeholder.com/400x200?text=No+Image"} />
        </div>
      )}
    </div>
  );
}

// Contest Screen
function ContestScreen({back,setScreen}){
  const [participants,setParticipants] = useState(["User1","User2"]);
  const [upiPaid,setUpiPaid] = useState(false);
  const joinEnabled = upiPaid;

  const payUPI = ()=>{
    alert("‚úÖ Payment done!");
    setUpiPaid(true);
    setParticipants([...participants,"You"]);
  };

  return (
    <div className="container">
      <div className="back-button" onClick={back}>üîô</div>
      <h2>Contest</h2>
      <div className="notice-box">
        <b>Participants:</b>
        <ul>{participants.map((p,i)=><li key={i}>{p}</li>)}</ul>
      </div>
      <button onClick={payUPI}>Pay Entry Fee ‚Çπ10</button>
      <button onClick={()=>joinEnabled && setScreen("quiz")} disabled={!joinEnabled} className="next-btn">
        Join Quiz
      </button>
    </div>
  );
}

// Quiz Screen
function QuizScreen({back,answers,setAnswers}){
  const [questions,setQuestions]=useState([]);
  const [current,setCurrent]=useState(0);

  useEffect(()=>{
    fetch("https://raw.githubusercontent.com/Sajanpreetsingh367/Gill-Tarn-taran/main/practice_questions.json")
    .then(r=>r.json()).then(j=>setQuestions(j)).catch(e=>console.log(e));
  },[]);

  if(questions.length===0) return <div className="container">Loading Quiz...</div>;
  const q = questions[current];

  const handleNext = ()=>{
    if(current < questions.length-1) setCurrent(current+1);
    else {
      alert("Quiz submitted ‚úÖ");
      back();
    }
  };

  return (
    <div className="container">
      <div className="back-button" onClick={back}>üîô</div>
      <h2>Contest Quiz</h2>
      <div className="notice-box">Question {current+1}/{questions.length}</div>
      <div className="image-frame"><img src={q.image || "https://via.placeholder.com/400x200?text=Question+Image"} /></div>
      {["a","b","c","d"].map(opt=>
        <button key={opt} onClick={()=>setAnswers({...answers,[current]:opt})}>{q[opt]}</button>
      )}
      <button onClick={handleNext} className="next-btn">{current < questions.length-1 ? "Next" : "Submit"}</button>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
</script>
</body>
</html>
