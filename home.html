<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UPSC — Premium Access</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js"></script>

<style>
body{
  margin:0;
  font-family:'Poppins',sans-serif;
  background:radial-gradient(circle at 50% 20%,#222 0%,#000 90%);
  color:white;
}
.header{
  text-align:center;
  padding:20px 10px;
  background:rgba(255,255,255,0.05);
  backdrop-filter:blur(10px);
  font-size:26px;
  font-weight:700;
}
.section-card{
  background:rgba(255,255,255,0.1);
  margin:14px;
  padding:18px;
  border-radius:14px;
  cursor:pointer;
  transition:0.3s;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.section-card:hover{
  transform:scale(1.03);
}
.locked{
  filter:blur(2px);
  opacity:0.7;
  pointer-events:none;
}
.pay-box{
  background:linear-gradient(120deg,#c79f2c,#ffd700,#c79f2c);
  padding:18px;
  border-radius:18px;
  text-align:center;
  font-weight:700;
  font-size:20px;
  margin:18px;
  cursor:pointer;
  color:#000;
  animation:pulse 1.5s infinite;
}
@keyframes pulse{
  0%{transform:scale(1);}
  50%{transform:scale(1.05);}
  100%{transform:scale(1);}
}
.small{
  font-size:12px;
  opacity:.6;
}
.logout{
  position:fixed;
  bottom:20px;
  right:20px;
  padding:10px 14px;
  border-radius:10px;
  border:none;
  background:#ff3b3b;
  color:white;
  font-weight:700;
}
</style>
</head>
<body>

<div class="header">UPSC PREMIUM</div>
<div id="subBox"></div>

<div id="sections"></div>

<button class="logout" onclick="logout()">Logout</button>

<script>
// ✅ Firebase Init
const firebaseConfig = {
  apiKey:"AIzaSyDwbIHTMWM_AQ-NlsdXGDzAfoC8Tf8lZiY",
  authDomain:"study-discussion-club.firebaseapp.com",
  projectId:"study-discussion-club",
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

// ✅ UPSC Sections
const sectionList = [
  "Current Affairs",
  "GK Questions",
  "Books Summary",
  "Prelims Practice",
  "Mains Practice",
  "Interview Mock",
  "Contest Arena",
  "Mind Maps",
  "Social Media Notes",
  "Discussion Forum",
  "Donation Bank"
];

// ✅ Get user subscription and load UI
auth.onAuthStateChanged(async user=>{
  if(!user) return location.href="index.html";

  const snap = await db.collection("users").doc(user.uid).get();
  const data = snap.data() || {};

  const subscribed = data.subscription === true;

  if(!subscribed){
    document.getElementById("subBox").innerHTML = `
      <div class="pay-box" onclick="buyNow()">
        Unlock Full UPSC — ₹17
        <div class="small">One time · Lifetime Access</div>
      </div>
    `;
  }

  let html = "";
  sectionList.forEach(sec=>{
    html += `
      <div class="section-card ${!subscribed?'locked':''}" onclick="openSection('${sec}')">
        <span>${sec}</span> <span>➡️</span>
      </div>`;
  });

  document.getElementById("sections").innerHTML = html;
});

// ✅ Pay Button
function buyNow(){
  alert("Payment Gateway integrate karunga — webhook tum doge ✅");
}

// ✅ Section Open
function openSection(name){
  alert(name+" Section Open ✅ (Content baad me load)");
}

// ✅ Logout
function logout(){
  auth.signOut();
  location.href="index.html";
}
</script>

</body>
</html>
