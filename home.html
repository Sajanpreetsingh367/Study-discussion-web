<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>UPSC Study Discussion Club</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
:root { --accent:#6C63FF; --accent2:#00C2A8; }
body {
  background: radial-gradient(circle at 50% 20%, #1e1e3f 0%, #000 100%);
  color: white; font-family: "Poppins", sans-serif; text-align: center; padding: 20px;
  margin: 0;
}
.hidden { display:none; }
.card-grid { display:grid; grid-template-columns:repeat(2,1fr); gap:16px; margin-top:25px; }
.card {
  background:rgba(255,255,255,0.08); padding:18px; border-radius:14px; cursor:pointer;
  transition:0.3s; backdrop-filter:blur(6px);
}
.card:hover { background:rgba(255,255,255,0.18); transform:scale(1.03); }
.card img { width:70px; height:70px; margin-bottom:8px; border-radius:10px; }
button {
  cursor:pointer; border:none; font-weight:600; border-radius:10px;
  padding:12px 22px; color:white;
}
.primary { background:linear-gradient(90deg,#ff5858,#ff9e00); }
.secondary { background:linear-gradient(90deg,#007bff,#00d4ff); }
.notice {
  background:rgba(255,255,255,0.09); padding:14px; border-radius:10px;
  margin-top:16px; font-size:13px; color:#e0e0e0;
}
.section-content img {
  width:100%; max-width:320px; border-radius:10px; margin-top:10px;
}
.backBtn {
  position:absolute; left:12px; top:12px; border:none;
  background:rgba(255,255,255,0.13); padding:8px 14px; border-radius:10px; color:white;
}
</style>
</head>

<body>

<!-- HOME -->
<div id="homeScreen">
  <h2>üìò Study Discussion Club</h2>
  <p>Select a learning section</p>
  <div class="card-grid">
    <div class="card" onclick="openSection('current')"><img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png"><div>Current Affairs</div></div>
    <div class="card" onclick="openSection('practice')"><img src="https://cdn-icons-png.flaticon.com/512/201/201572.png"><div>Practice Questions</div></div>
    <div class="card" onclick="openSection('mindmap')"><img src="https://cdn-icons-png.flaticon.com/512/952/952717.png"><div>Mind Maps</div></div>
    <div class="card" onclick="openSection('interview')"><img src="https://cdn-icons-png.flaticon.com/512/3135/3135810.png"><div>Interview Q&A</div></div>
    <div class="card" onclick="openSection('contest')"><img src="https://cdn-icons-png.flaticon.com/512/1828/1828884.png"><div>Contest</div></div>
  </div>
</div>

<!-- SECTION VIEW -->
<div id="sectionScreen" class="hidden">
  <button class="backBtn" onclick="goHome()">‚≠† Back</button>
  <h2 id="sectionTitle"></h2>
  <div id="sectionContent" class="section-content"></div>
</div>

<!-- CONTEST SCREEN -->
<div id="contestScreen" class="hidden">
  <button class="backBtn" onclick="goHome()">‚≠† Back</button>
  <h2>üèÜ Contest</h2>
  <div class="notice">
    Dear aspirants, based on your scores, candidates scoring above 90 will be shortlisted.  
    The shortlisted list and image will appear in the result section.  
    The total contest prize depends on the total participants‚Äô entry fees,  
    after a 2% platform fee deduction.
  </div>
</div>

<script>
// Raw GitHub links for each section
const sectionLinks = {
  current: "https://raw.githubusercontent.com/avnoordeepsingh733-svg/Avnoor/main/currentaffairs.json",
  practice: "https://raw.githubusercontent.com/avnoordeepsingh733-svg/Avnoor/main/upsc%20practise%20questions.json",
  mindmap: "https://raw.githubusercontent.com/avnoordeepsingh733-svg/Avnoor/main/mindmaps.json",
  interview: "https://raw.githubusercontent.com/avnoordeepsingh733-svg/Avnoor/main/upscinterviewpractisequestions.json"
};

async function openSection(section) {
  if (section === "contest") {
    document.getElementById("homeScreen").classList.add("hidden");
    document.getElementById("contestScreen").classList.remove("hidden");
    return;
  }

  document.getElementById("homeScreen").classList.add("hidden");
  document.getElementById("sectionScreen").classList.remove("hidden");

  const titleMap = {
    current: "üì∞ Current Affairs",
    practice: "üß† Practice Questions",
    mindmap: "üó∫Ô∏è Mind Maps",
    interview: "üí¨ Interview Q&A"
  };
  document.getElementById("sectionTitle").innerText = titleMap[section] || "Section";

  const container = document.getElementById("sectionContent");
  container.innerHTML = "<p>Loading data...</p>";

  try {
    const res = await fetch(sectionLinks[section]);
    const data = await res.json();
    container.innerHTML = "";

    data.forEach(item => {
      const div = document.createElement("div");
      div.style.background = "rgba(255,255,255,0.08)";
      div.style.padding = "15px";
      div.style.borderRadius = "12px";
      div.style.margin = "12px auto";
      div.style.maxWidth = "350px";

      const title = document.createElement("h4");
      title.textContent = item.title || item.question || "Untitled";
      div.appendChild(title);

      if (item.image || item.img || item.photo) {
        const img = document.createElement("img");
        img.src = item.image || item.img || item.photo;
        div.appendChild(img);
      }

      if (item.description) {
        const desc = document.createElement("p");
        desc.textContent = item.description;
        div.appendChild(desc);
      }

      container.appendChild(div);
    });

  } catch (e) {
    container.innerHTML = "<p style='color:red'>‚ùå Failed to load data from GitHub.</p>";
  }
}

function goHome() {
  document.querySelectorAll("div").forEach(div => div.classList.add("hidden"));
  document.getElementById("homeScreen").classList.remove("hidden");
}
</script>
</body>
</html>
