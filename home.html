<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>UPSC Quiz - Study Discussion Club</title>
<style>
:root {
  --accent:#6C63FF; 
  --accent2:#00C2A8;
}
*{margin:0;padding:0;box-sizing:border-box;font-family:"Poppins",sans-serif;}
body{
  background:radial-gradient(circle at 50% 20%,#2a2a72 0%,#000 90%);
  color:white;text-align:center;padding:18px;
}
.hidden{display:none;}
.grid{
  margin-top:25px;display:grid;grid-template-columns:repeat(2,1fr);gap:16px;
}
.card{
  background:rgba(255,255,255,0.08);
  padding:18px;border-radius:14px;cursor:pointer;transition:0.25s;
}
.card:hover{background:rgba(255,255,255,0.18);}
.card img{width:70px;height:70px;margin-bottom:6px;}
.logoutBtn{
  margin-top:35px;background:linear-gradient(90deg,var(--accent),var(--accent2));
  border:none;padding:12px 22px;border-radius:10px;color:white;font-weight:700;
  cursor:pointer;
}
.backBtn{
  position:absolute;left:12px;top:12px;border:none;
  background:rgba(255,255,255,0.13);
  padding:8px 14px;border-radius:10px;color:white;cursor:pointer;
}
#imgList img{
  width:100%;border-radius:14px;margin-bottom:20px;
  border:2px solid rgba(255,255,255,0.2);
}
.option{
  background:rgba(255,255,255,0.1);
  margin:8px 0;padding:10px;border-radius:10px;
  cursor:pointer;transition:0.2s;
}
.option:hover{background:rgba(255,255,255,0.2);}
.selected{background:linear-gradient(90deg,#6C63FF,#00C2A8);}
button.nextBtn{
  background:linear-gradient(90deg,#6C63FF,#00C2A8);
  border:none;padding:12px 22px;border-radius:10px;color:white;font-weight:700;
  cursor:pointer;margin-top:15px;
}
.resultBox{
  background:rgba(255,255,255,0.1);
  padding:20px;border-radius:14px;margin-top:20px;
}
</style>
</head>
<body>

<!-- ‚úÖ HOME SCREEN -->
<div id="homeScreen">
  <h2 id="examName">Your Course</h2>
  <p>Select a learning section</p>
  <div class="grid">
    <div class="card" onclick="openSection('contest')">
      <img src="https://cdn-icons-png.flaticon.com/512/1828/1828884.png">
      <div>Contest</div>
    </div>
  </div>
  <button class="logoutBtn" onclick="logoutUser()">Logout</button>
</div>

<!-- ‚úÖ CONTEST SCREEN -->
<div id="contestScreen" class="hidden">
  <button class="backBtn" onclick="goBack()">‚≠† Back</button>
  <h2>üî• Contest</h2>
  <p style="margin-top:10px;">Entry Fee: ‚Çπ10</p>
  <button id="payBtn"
    style="margin-top:25px;background:linear-gradient(90deg,#ff5858,#ff9e00);
    border:none;padding:12px 22px;border-radius:10px;
    font-size:16px;font-weight:700;color:white;cursor:pointer;"
    onclick="payEntry()">Pay Entry Fee ‚Çπ10</button>

  <button id="joinBtn" disabled
    style="margin-top:15px;background:#555;
    border:none;padding:12px 22px;border-radius:10px;
    font-size:16px;font-weight:700;color:white;cursor:not-allowed;"
    onclick="startQuiz()">Join Quiz</button>
</div>

<!-- ‚úÖ QUIZ SCREEN -->
<div id="quizScreen" class="hidden">
  <button class="backBtn" onclick="goBackToContest()">‚≠† Back</button>
  <h2>üìò UPSC Quiz</h2>
  <div id="quizBox" style="margin-top:20px;text-align:left;"></div>
</div>

<!-- ‚úÖ RESULT SCREEN -->
<div id="resultScreen" class="hidden">
  <h2>üèÅ Quiz Completed</h2>
  <div id="resultBox" class="resultBox"></div>
  <button class="nextBtn" onclick="goHome()">Go Home</button>
</div>

<script>
const QUIZ_URL = "https://raw.githubusercontent.com/Sajanpreet35/Upsc-quiz-/main/upsc_quiz.json";

document.getElementById("examName").innerText = "UPSC Course";

// ‚úÖ Home ‚Üí Contest
function openSection(sec){
  document.getElementById("homeScreen").classList.add("hidden");
  document.getElementById("contestScreen").classList.remove("hidden");
}

// ‚úÖ Payment System (Mock)
function payEntry(){
  alert("‚úÖ Payment Successful (Testing Mode)");
  localStorage.setItem("paidEntry","true");
  const btn = document.getElementById("joinBtn");
  btn.disabled = false;
  btn.style.cursor="pointer";
  btn.style.background="linear-gradient(90deg,#007bff,#00d4ff)";
}

// ‚úÖ Start Quiz
let quizData = [];
let currentQ = 0;
let score = 0;
let answers = {};

async function startQuiz(){
  document.getElementById("contestScreen").classList.add("hidden");
  document.getElementById("quizScreen").classList.remove("hidden");

  const res = await fetch(QUIZ_URL);
  quizData = await res.json();
  currentQ = 0;
  score = 0;
  answers = {};
  showQuestion();
}

function showQuestion(){
  const box = document.getElementById("quizBox");
  box.innerHTML = "";
  const q = quizData[currentQ];

  const qDiv = document.createElement("div");
  qDiv.innerHTML = `<h3>Q${currentQ+1}. ${q.question}</h3>`;

  for(let key in q.options){
    const opt = document.createElement("div");
    opt.className = "option";
    opt.innerText = `${key}. ${q.options[key]}`;
    opt.onclick = () => selectOption(key,opt);
    qDiv.appendChild(opt);
  }

  const btn = document.createElement("button");
  btn.className = "nextBtn";
  btn.innerText = (currentQ === quizData.length - 1) ? "Submit Quiz" : "Next";
  btn.onclick = nextQuestion;
  qDiv.appendChild(btn);

  box.appendChild(qDiv);
}

function selectOption(opt, elem){
  answers[currentQ] = opt;
  document.querySelectorAll(".option").forEach(o=>o.classList.remove("selected"));
  elem.classList.add("selected");
}

function nextQuestion(){
  if(answers[currentQ]){
    if(answers[currentQ] === quizData[currentQ].correct_answer){
      score++;
    }
  }

  if(currentQ < quizData.length - 1){
    currentQ++;
    showQuestion();
  } else {
    showResult();
  }
}

function showResult(){
  document.getElementById("quizScreen").classList.add("hidden");
  document.getElementById("resultScreen").classList.remove("hidden");
  const resultBox = document.getElementById("resultBox");
  resultBox.innerHTML = `
    <h3>Your Score: ${score} / ${quizData.length}</h3>
    <p>Well done! Keep practicing for UPSC success üí™</p>
  `;
}

// ‚úÖ Navigation
function goBack(){
  document.getElementById("contestScreen").classList.add("hidden");
  document.getElementById("homeScreen").classList.remove("hidden");
}
function goBackToContest(){
  document.getElementById("quizScreen").classList.add("hidden");
  document.getElementById("contestScreen").classList.remove("hidden");
}
function goHome(){
  document.getElementById("resultScreen").classList.add("hidden");
  document.getElementById("homeScreen").classList.remove("hidden");
}
function logoutUser(){
  localStorage.clear();
  window.location.href="index.html";
}
</script>

</body>
</html>
