<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>SDC â€” Home</title>

<!-- React + Babel -->
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<!-- Firebase -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey:"AIzaSyDwbIHTMWM_AQ-NlsdXGDzAfoC8Tf8lZiY",
  authDomain:"study-discussion-club.firebaseapp.com",
  projectId:"study-discussion-club",
  storageBucket:"study-discussion-club.appspot.com",
  messagingSenderId:"383378613377",
  appId:"1:383378613377:web:3b932c6b42076352811980"
};
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);
window.F = { auth, db, onAuthStateChanged, signOut, doc, getDoc };
</script>

<style>
html,body,#root{height:100%;margin:0;padding:0;font-family:"Poppins",sans-serif;background:radial-gradient(circle at 50% 20%,#2a2a72 0%,#000 90%);color:white;}
*{box-sizing:border-box;}
.topBar{padding:16px;text-align:center;font-size:20px;font-weight:700;letter-spacing:.5px;background:rgba(255,255,255,0.1);backdrop-filter:blur(20px);}
.container{padding:20px;}
.sectionTitle{margin-top:10px;font-size:14px;color:#c7c7c7;}
.tile-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:14px;margin-top:10px;}
.tile{padding:18px;border-radius:15px;background:rgba(255,255,255,0.15);backdrop-filter:blur(12px);text-align:center;cursor:pointer;font-weight:600;transition:0.2s;}
.tile:hover{transform:scale(1.05);background:linear-gradient(90deg,#6C63FF,#00C2A8);}
.logout{position:fixed;right:14px;top:14px;padding:10px 14px;border-radius:50px;background:#ff4747;color:white;font-size:13px;border:none;cursor:pointer;box-shadow:0 0 10px rgba(0,0,0,0.4);}
</style>
</head>

<body>
<div id="root"></div>

<script type="text/babel">

const { useEffect, useState } = React;
const F = window.F;

function Home(){
  const [exam,setExam] = useState("Loading...");

  useEffect(()=>{
    F.onAuthStateChanged(F.auth, async (u)=>{
      if(!u) return window.location.href="index.html";

      const snap = await F.getDoc(F.doc(F.db,"users",u.uid));
      if(snap.exists()){
        setExam(snap.data().exam || "Your Exam");
      }
    });
  },[]);

  const logoutUser = ()=>F.signOut(F.auth).then(()=>window.location.href="index.html");

  const sections = [
    "Current Affairs",
    "GK Questions",
    "UPSC Books Summary",
    "Prelims Practice",
    "Mains Practice",
    "Interview Practice",
    "Contest Arena",
    "Mind Maps",
    "Social Media Material",
    "Discussion Board",
    "Donation Bank"
  ];

  return (
    <>
      <button className="logout" onClick={logoutUser}>Logout</button>
      <div className="topBar">{exam}</div>
      <div className="container">
        <div className="sectionTitle">Available Sections</div>
        <div className="tile-grid">
          {sections.map((s,i)=>(
            <div key={i} className="tile" onClick={()=>alert(s+" coming soon!")}>{s}</div>
          ))}
        </div>
      </div>
    </>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<Home/>);
</script>

</body>
</html>
